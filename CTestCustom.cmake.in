#
# +++++++++ IGNORE SOME OF THE TESTS WHEN RUNNING MEMCHECKS (e.g. valgrind) +++++++++++++++
#
# this basically includes every test except the *Run tests
#

set (CTEST_CUSTOM_MEMCHECK_IGNORE 
	${CTEST_CUSTOM_MEMCHECK_IGNORE}
	TestCppcheckSources
	TestJobsubExampleDaturaAloneCleanup
	TestJobsubExampleDaturaAloneSetup
	TestJobsubExampleDaturaAloneConverterLog
	TestJobsubExampleDaturaAloneConverterHisto
	TestJobsubExampleDaturaAloneConverterHotpix
	TestJobsubExampleDaturaAloneConverterOutput
	TestJobsubExampleDaturaAloneClusearchLog
	TestJobsubExampleDaturaAloneClusearchHisto
	TestJobsubExampleDaturaAloneClusearchOffset
	TestJobsubExampleDaturaAloneClusearchOutput
	TestJobsubExampleDaturaAloneHitmakerLog
	TestJobsubExampleDaturaAloneHitmakerHisto
	TestJobsubExampleDaturaAloneHitmakerPrealign
	TestJobsubExampleDaturaAloneHitmakerOutput
	TestJobsubExampleDaturaAloneAlignLog
	TestJobsubExampleDaturaAloneAlignHisto
	TestJobsubExampleDaturaAloneAlignDB
	TestJobsubExampleDaturaAloneAlignOutput
	TestJobsubExampleDaturaAloneFitterLog
	TestJobsubExampleDaturaAloneFitterHisto
	TestJobsubExampleDaturaAloneFitterOutput
	TestJobsubExampleDaturaAloneStatTestAlign
	TestJobsubExampleDaturaAloneStatTestFitter
	TestPysubExampleDaturaAloneCleanup
	TestPysubExampleDaturaAloneSetup
	TestPysubExampleDaturaAloneConverterLog
	TestPysubExampleDaturaAloneConverterHisto
	TestPysubExampleDaturaAloneConverterHotpix
	TestPysubExampleDaturaAloneConverterOutput
	TestPysubExampleDaturaAloneClusearchLog
	TestPysubExampleDaturaAloneClusearchHisto
	TestPysubExampleDaturaAloneClusearchOffset
	TestPysubExampleDaturaAloneClusearchOutput
	TestPysubExampleDaturaAloneHitmakerLog
	TestPysubExampleDaturaAloneHitmakerHisto
	TestPysubExampleDaturaAloneHitmakerPrealign
	TestPysubExampleDaturaAloneHitmakerOutput
	TestPysubExampleDaturaAloneAlignLog
	TestPysubExampleDaturaAloneAlignHisto
	TestPysubExampleDaturaAloneAlignDB
	TestPysubExampleDaturaAloneAlignOutput
	TestPysubExampleDaturaAloneFitterLog
	TestPysubExampleDaturaAloneFitterHisto
	TestPysubExampleDaturaAloneFitterOutput
	TestPysubExampleDaturaAloneStatTestAlign
	TestPysubExampleDaturaAloneStatTestFitter
	TestPysubExampleAnemone2FEI4Cleanup
	TestPysubExampleAnemone2FEI4Setup
	TestPysubExampleAnemone2FEI4ConverterLog
	TestPysubExampleAnemone2FEI4ConverterHisto
	TestPysubExampleAnemone2FEI4ConverterHotpix
	TestPysubExampleAnemone2FEI4ConverterOutput
	TestPysubExampleAnemone2FEI4ClusearchLog
	TestPysubExampleAnemone2FEI4ClusearchHisto
	TestPysubExampleAnemone2FEI4ClusearchOffset
	TestPysubExampleAnemone2FEI4ClusearchOutput
	TestPysubExampleAnemone2FEI4HitmakerLog
	TestPysubExampleAnemone2FEI4HitmakerHisto
	TestPysubExampleAnemone2FEI4HitmakerPrealign
	TestPysubExampleAnemone2FEI4HitmakerOutput
	TestPysubExampleAnemone2FEI4AlignLog
	TestPysubExampleAnemone2FEI4AlignHisto
	TestPysubExampleAnemone2FEI4AlignDB
	TestPysubExampleAnemone2FEI4AlignOutput
	TestPysubExampleAnemone2FEI4FitterLog
	TestPysubExampleAnemone2FEI4FitterHisto
	TestPysubExampleAnemone2FEI4FitterOutput
	TestPysubExampleAnemone2FEI4StatTestAlign
	TestPysubExampleAnemone2FEI4StatTestFitter
    )

# use valgrind for dynamic analysis
set (CTEST_MEMORYCHECK_COMMAND "/usr/bin/valgrind")
set (CTEST_MEMORYCHECK_COMMAND_OPTIONS "--trace-children=yes --leak-check=yes --leak-resolution=high  --suppressions=$ROOTSYS/etc/valgrind-root.supp")

# increase the maximum number of warnings reported by ctest from the default 50
set (CTEST_CUSTOM_MAXIMUM_NUMBER_OF_WARNINGS 150)

# actually install the binaries after building so that they can be used in the tests
set (CTEST_CUSTOM_PRE_TEST
    "make install"
    )
