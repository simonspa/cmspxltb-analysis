<?xml version="1.0" encoding="us-ascii"?>
<!-- ?xml-stylesheet type="text/xsl" href="http://ilcsoft.desy.de/marlin/marlin.xsl"? -->
<!-- ?xml-stylesheet type="text/xsl" href="marlin.xsl"? -->


<!--###############################################
    #                                             #
    #     Example steering file for clustering    #
    #	  Version: $Id$                           #
    #                                             #
    ###############################################-->

<marlin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ilcsoft.desy.de/marlin/marlin.xsd">

  <execute>
    <processor name="AIDA"/>
    <processor name="Mimosa26EUTelAutoPedestalNoiseProcessor"/>
    <processor name="LoadHotPixelDB"/>
    <processor name="Clustering"/>
    <processor name="MyEUTelUtilityPrintEventNumber"/>
    <processor name="Save"/>
  </execute>

  <global>
    <parameter name="LCIOInputFiles"> @LcioPath@/@FilePrefix@-converter.slcio </parameter>
    <parameter name="GearXMLFile" value="@GeometryPath@/@GearFile@"/>
    <parameter name="MaxRecordNumber" value="@MaxRecordNumber@"/>
    <parameter name="SkipNEvents" value="0"/>
    <parameter name="SupressCheck" value="false"/>
    <parameter name="Verbosity"> @Verbosity@  </parameter> 
  </global>

  <processor name="AIDA" type="AIDAProcessor">
    <parameter name="Compress" type="int" value="1"/>
    <parameter name="FileName" type="string"> @HistogramPath@/@FilePrefix@-clustering </parameter>
    <parameter name="FileType" type="string" value="root"/>
  </processor>

  <processor name="Mimosa26EUTelAutoPedestalNoiseProcessor" type="EUTelAutoPedestalNoiseProcessor">
    <parameter name="NoiseCollectionName" type="string" lcioOutType="TrackerData"> m26_noise </parameter>
    <parameter name="PedestalCollectionName" type="string" lcioOutType="TrackerData"> m26_pedestal </parameter>
    <parameter name="StatusCollectionName" type="string" lcioOutType="TrackerRawData"> m26_status </parameter>
    <parameter name="MaxXVector" type="IntVec"> 1151 1151 1151 1151 1151 1151</parameter>
    <parameter name="MaxYVector" type="IntVec"> 575 575 575 575 575 575  </parameter>
  </processor>

  <processor name="LoadHotPixelDB" type="ConditionsProcessor">
    <parameter name="DBInit" type="string" value="localhost:lccd_test:calvin:hobbes"/>
    <parameter name="SimpleFileHandler" type="StringVec"> m26_hotpixel @DatabasePath@/@FilePrefix@-hotpixel.slcio m26_hotpixel </parameter>
  </processor>

  <processor name="Clustering" type="EUTelClusteringProcessor">
    <parameter name="HotPixelCollectionName" type="string" value="m26_hotpixel" />
    <parameter name="NZSDataCollectionName" type="string" lcioInType="TrackerData"> data </parameter>
    <parameter name="NoiseCollectionName" type="string" lcioInType="TrackerData"> m26_noise </parameter>
    <parameter name="StatusCollectionName" type="string" lcioInType="TrackerRawData"> m26_status </parameter>
    <parameter name="ZSDataCollectionName" type="string" lcioInType="TrackerData"> zsdata_m26 </parameter>
    <parameter name="PulseCollectionName" type="string" lcioOutType="TrackerPulse"> m26_cluster </parameter>
    <parameter name="ClusteringAlgo" type="string" value="FixedFrame"/>
    <parameter name="ZSClusteringAlgo" type="string" value="@ClusteringAlgorithm@"/>
    <parameter name="FFSeedCut" type="float" value="0.0"/>
    <parameter name="FFClusterCut" type="float" value="0.0"/>
    <parameter name="FFClusterSizeX" type="int" value="5"/>
    <parameter name="FFClusterSizeY" type="int" value="5"/>
    <parameter name="SparseClusterCut" type="float" value="0.0"/>
    <parameter name="SparseSeedCut" type="float" value="0.0"/>
    <parameter name="SparseMinDistance" type="float" value="0"/>
    <parameter name="HistogramFilling" type="bool" value="@FillHistograms@"/>
    <parameter name="HistoInfoFileName" type="string" value="@HistoInfoFile@"/>
  </processor>

  <processor name="Save" type="EUTelOutputProcessor">
    <parameter name="DropCollectionNames" type="StringVec"> zsdata_m26 </parameter>
    <parameter name="LCIOOutputFile" type="string"> @LcioPath@/@FilePrefix@-clustering.slcio </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
  </processor>

  <processor name="MyEUTelUtilityPrintEventNumber" type="EUTelUtilityPrintEventNumber">
    <parameter name="EveryNEvents" type="int" value="1000"/>
    <parameter name="printTimestamp" type="bool" value="false" />
  </processor>

</marlin>